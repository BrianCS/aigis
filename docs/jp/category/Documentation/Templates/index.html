<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <link href="../../../doc_assets/css/okadia.css" rel="stylesheet">
    <link href="../../../doc_assets/css/doc.css" rel="stylesheet">
  </head>
  <body>
    <header class="doc-Header">
  <nav class="doc-Header_Nav">
    <div class="doc-Header_Col-left">
      <a class="doc-Header_Home" href="../../../../../">
        aigis
      </a>
    </div>
    <div class="doc-Header_Col-right">
      <ul class="doc-Header_Menu">
        <li class="doc-Header_MenuItem">Docs</li>
        <li class="doc-Header_MenuItem"><a href="../../../../../sample/" target="_blank">Sample</a></li>
        <li class="doc-Header_MenuItem"><a href="https://github.com/pxgrid/aigis/" target="_blank">GitHub</a></li>
      </ul>
    </div>
  </nav>
</header>

    <main class="doc-Body">
      <div class="doc-Body_Col-left">
        <nav class="doc-Menu">
  <a href="../../../">Index</a>
  <ul data-path-depth="0"><li data-path-depth="0"><a href="../../../category/Documentation/index.html">Documentation</a><ul data-path-depth="1"><li data-path-depth="1"><a href="../../../category/Documentation/Comment-Syntax/index.html">Comment Syntax</a></li><li data-path-depth="1"><a href="../../../category/Documentation/Configs/index.html">Configs</a></li><li data-path-depth="1"><a href="../../../category/Documentation/Syntax-Highlight/index.html">Syntax Highlight</a></li><li data-path-depth="1"><a href="../../../category/Documentation/Templates/index.html" data-tree-current>Templates</a></li></ul></li><li data-path-depth="0"><a href="../../../category/Guide/index.html">Guide</a><ul data-path-depth="1"><li data-path-depth="1"><a href="../../../category/Guide/Quick-Start/index.html">Quick Start</a></li></ul></li><li data-path-depth="0"><a href="../../../category/Tips/index.html">Tips</a><ul data-path-depth="1"><li data-path-depth="1"><a href="../../../category/Tips/Errors/index.html">Errors</a></li><li data-path-depth="1"><a href="../../../category/Tips/How-to/index.html">How to</a></li></ul></li><li data-path-depth="0"><a href="../../../category/Usage/index.html">Usage</a><ul data-path-depth="1"><li data-path-depth="1"><a href="../../../category/Usage/CLI/index.html">CLI</a></li><li data-path-depth="1"><a href="../../../category/Usage/Node.js/index.html">Node.js</a></li><li data-path-depth="1"><a href="../../../category/Usage/gulp/index.html">gulp</a></li></ul></li></ul>
</nav>

      </div>
      <div class="doc-Body_Col-right">
        <div class="doc-Modules">
  
    
      <div class="doc-Module">
        <h1 class="doc-Module_heading" id="Templates">
          Templates
        </h1>
        <p>スタイルガイドの生成にはテンプレートが必要になります。aigisではテンプレートとして次の3種類のテンプレートエンジンから選択して利用することができます。</p>
<h3 id="-">利用できるテンプレートエンジンと拡張子</h3>
<ul>
<li>EJS: <code>.ejs</code></li>
<li>Jade: <code>.jade</code></li>
<li>Handlebars: <code>.hbs</code></li>
</ul>
<p>選択するテンプレートエンジンごとに決められた拡張子で<code>index.xxx</code>というファイルを作成してください。</p>
<blockquote>
<p>GitHubのリポジトリにはテーマを含めたexamplesがありますので、参考にしてみてください。このドキュメント自体もaigisで生成されたものなので、合わせて参考にしてみてください。</p>
<ul>
<li><a href="https://github.com/pxgrid/aigis/tree/master/examples" title="null">aigis/examples</a></li>
<li><a href="https://github.com/pxgrid/aigis/tree/gh-pages/src/template" title="null">aigis/gh-pages/src</a></li>
</ul>
</blockquote>
<h2 id="-">インデックステンプレート</h2>
<p>スタイルガイドの生成にはテンプレートファイルとして<code>index.xxx</code>が必要になります。</p>
<blockquote>
<h4 id="-">インデックステンプレートのファイル名</h4>
<p><code>template_engine</code>に<code>ejs</code>をしている場合には<code>index.ejs</code>が、<code>jade</code>を指定している場合には<code>index.jade</code>が、<code>hbs</code>を指定している場合には<code>index.hbs</code>が必要になります。
テンプレートエンジンの指定については<a href="" title="null">Documentation/Configs</a>を参照。</p>
</blockquote>
<h3 id="-">テンプレートのサンプル</h3>
<p>EJSのテンプレートの例です。テンプレートで参照している値は、スタイルガイド生成用にaigisがコンパイルした時に渡す値です。</p>
<pre><code class="lang-ejs"><span class="token doctype" >&lt;!DOCTYPE html></span>
<span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>html</span><span class="token punctuation" >></span></span>
  <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>head</span><span class="token punctuation" >></span></span>
    <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>meta</span> <span class="token attr-name" >charset</span><span class="token attr-value" ><span class="token punctuation" >=</span><span class="token punctuation" >"</span>utf-8<span class="token punctuation" >"</span></span><span class="token punctuation" >></span></span>
    <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>link</span> <span class="token attr-name" >href</span><span class="token attr-value" ><span class="token punctuation" >=</span><span class="token punctuation" >"</span>&lt;%<span class="token punctuation" >=</span> root %<span class="token punctuation" >></span>aigis_assets/css/doc.css<span class="token punctuation" >"</span></span> <span class="token attr-name" >rel</span><span class="token attr-value" ><span class="token punctuation" >=</span><span class="token punctuation" >"</span>stylesheet<span class="token punctuation" >"</span></span><span class="token punctuation" >></span></span>
  <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>head</span><span class="token punctuation" >></span></span>
  <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>body</span><span class="token punctuation" >></span></span>
    <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>header</span><span class="token punctuation" >></span></span>
      <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>%-</span> <span class="token attr-name" >config.name</span> <span class="token attr-name" >%</span><span class="token punctuation" >></span></span>
    <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>header</span><span class="token punctuation" >></span></span>
    <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>nav</span><span class="token punctuation" >></span></span>
      <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>%-</span> <span class="token attr-name" >helper.renderCollectionTree('category')</span> <span class="token attr-name" >%</span><span class="token punctuation" >></span></span>
    <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>nav</span><span class="token punctuation" >></span></span>
    <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>main</span><span class="token punctuation" >></span></span>
      <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>%-</span> <span class="token attr-name" >html</span> <span class="token attr-name" >%</span><span class="token punctuation" >></span></span>
      <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>%</span> <span class="token attr-name" >if(components.length)</span> <span class="token attr-name" >{</span> <span class="token attr-name" >%</span><span class="token punctuation" >></span></span>
        &lt;% components.forEach((component) => { %>
          <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>%-</span> <span class="token attr-name" >component.config.name</span> <span class="token attr-name" >%</span><span class="token punctuation" >></span></span>
          <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>%-</span> <span class="token attr-name" >component.html</span> <span class="token attr-name" >%</span><span class="token punctuation" >></span></span>
        <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>%</span> <span class="token attr-name" >})</span> <span class="token attr-name" >%</span><span class="token punctuation" >></span></span>
      <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>%</span> <span class="token attr-name" >}</span> <span class="token attr-name" >%</span><span class="token punctuation" >></span></span>
    <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>main</span><span class="token punctuation" >></span></span>
    <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>footer</span><span class="token punctuation" >></span></span>Last updated: <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>%-</span> <span class="token attr-name" >timestamp</span> <span class="token attr-name" >%</span><span class="token punctuation" >></span></span><span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>footer</span><span class="token punctuation" >></span></span>
  <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>body</span><span class="token punctuation" >></span></span>
<span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>html</span><span class="token punctuation" >></span></span>
</code></pre>
<h1 id="-">テンプレートで使える値</h1>
<p>aigisはコンパイル時につぎの値を元にテンプレートに渡しスタイルガイドを生成します。</p>
<table>
<thead>
<tr>
<th  >Name</th>
<th  >Type</th>
</tr>
</thead>
<tbody>
<tr>
<td  >components</td>
<td  >Array</td>
</tr>
<tr>
<td  >html</td>
<td  >String</td>
</tr>
<tr>
<td  >root</td>
<td  >String</td>
</tr>
<tr>
<td  >config</td>
<td  >Object</td>
</tr>
<tr>
<td  >timestamp</td>
<td  >String</td>
</tr>
<tr>
<td  >helper</td>
<td  >Object</td>
</tr>
</tbody>
</table>
<p>テンプレートでこの値を使ってスタイルガイドを構築します。</p>
<h2 id="components">components</h2>
<p>コンポーネントのHTMLなどが入ったオブジェクトの配列。</p>
<p>たとえば<code>./css/style.css</code>に次のようなコンポーネントを記述した場合:</p>
<pre><code class="lang-yaml"><span class="token punctuation" >---</span>
<span class="token key atrule" >name</span><span class="token punctuation" >:</span> component name
<span class="token key atrule" >category</span><span class="token punctuation" >:</span>
  <span class="token punctuation" >-</span> mod
  <span class="token punctuation" >-</span> btn
<span class="token punctuation" >---</span>

<span class="token comment" spellcheck="true">## component</span>

this is component!
</code></pre>
<p><code>components[0]</code>には次のようなコンポーネントが格納される:</p>
<pre><code class="lang-js"><span class="token punctuation" >{</span>
  md<span class="token punctuation" >:</span> <span class="token string" >'## component\n\nthis is component!'</span><span class="token punctuation" >,</span> <span class="token comment" spellcheck="true">// コンポーネントのドキュメント部分</span>
  html<span class="token punctuation" >:</span> <span class="token string" >'&lt;h2>component&lt;/h2>&lt;p>this is component&lt;/p>'</span><span class="token punctuation" >,</span> <span class="token comment" spellcheck="true">// ドキュメント部分をパースしたHTML</span>
  config<span class="token punctuation" >:</span> <span class="token punctuation" >{</span> <span class="token comment" spellcheck="true">// コンポーネントのコンフィグ部分</span>
    name<span class="token punctuation" >:</span> <span class="token string" >'component name'</span><span class="token punctuation" >,</span>
    category<span class="token punctuation" >:</span> <span class="token punctuation" >[</span><span class="token string" >'mod'</span><span class="token punctuation" >,</span> <span class="token string" >'btn'</span><span class="token punctuation" >]</span> 
  <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
  sourcePath<span class="token punctuation" >:</span> <span class="token string" >'/css/style.css'</span> <span class="token comment" spellcheck="true">// ドキュメントが記述されているファイルへのパス</span>
<span class="token punctuation" >}</span>
</code></pre>
<h2 id="html">html</h2>
<p>インデックスページ用のMarkdownファイルをパースしたHTMLが格納されている。</p>
<p><code>index.ejs</code>では次のようにすることで、インデックスページとコンポーネントページを同一のテンプレートでレンダリングすることができます。</p>
<pre><code class="lang-html"><span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>main</span><span class="token punctuation" >></span></span>
  <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>%-</span> <span class="token attr-name" >html</span> <span class="token attr-name" >%</span><span class="token punctuation" >></span></span>
  <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>%</span> <span class="token attr-name" >if(components.length)</span> <span class="token attr-name" >{</span> <span class="token attr-name" >%</span><span class="token punctuation" >></span></span>
  ...
  <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>%</span> <span class="token attr-name" >}</span> <span class="token attr-name" >%</span><span class="token punctuation" >></span></span>
<span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>main</span><span class="token punctuation" >></span></span>
</code></pre>
<h2 id="root">root</h2>
<p>出力されるページから見た、コンフィグファイルの<code>dest</code>で指定されたフォルダへの相対パスが格納されています。<code>&lt;head&gt;</code>要素などにCSSファイルへの参照を相対パスで書く際に利用できます。ファイルの参照を絶対パスで行う場合には使う必要はないでしょう。</p>
<blockquote>
<h4 id="example">Example</h4>
<pre><code class="lang-ejs"><span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>link</span> <span class="token attr-name" >href</span><span class="token attr-value" ><span class="token punctuation" >=</span><span class="token punctuation" >"</span>&lt;%<span class="token punctuation" >=</span> root %<span class="token punctuation" >></span>aigis_assets/css/doc.css<span class="token punctuation" >"</span></span> <span class="token attr-name" >rel</span><span class="token attr-value" ><span class="token punctuation" >=</span><span class="token punctuation" >"</span>stylesheet<span class="token punctuation" >"</span></span><span class="token punctuation" >></span></span>
</code></pre>
</blockquote>
<h2 id="config">config</h2>
<p>コンフィグファイル(<code>aigis_config.yml</code>)の内容が格納されたオブジェクトです。例えばコンフィグファイルの<code>name</code>という項目をテンプレートで使いたい場合、次のように<code>config.name</code>とすることで参照できます。</p>
<blockquote>
<h4 id="example">Example</h4>
<p>config:</p>
<pre><code class="lang-yaml"><span class="token key atrule" >name</span><span class="token punctuation" >:</span> styleguide!
</code></pre>
<p>template:</p>
<pre><code class="lang-ejs"><span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>header</span><span class="token punctuation" >></span></span>
  <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>%-</span> <span class="token attr-name" >config.name</span> <span class="token attr-name" >%</span><span class="token punctuation" >></span></span>
<span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>header</span><span class="token punctuation" >></span></span>
</code></pre>
<p>output:</p>
<pre><code class="lang-html"><span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>header</span><span class="token punctuation" >></span></span>
  styleguide!
<span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>header</span><span class="token punctuation" >></span></span>
</code></pre>
</blockquote>
<h2 id="timestamp">timestamp</h2>
<p><code>aigis run</code>が実行された時間が格納されています。形式はコンフィグファイルの<code>timestamp_format</code>で指定できます。</p>
<p><code>timestamp_format</code>に指定する形式は<a href="http://momentjs.com/docs/#week-year-week-and-weekday-tokens" title="null">Moment.jsのformat</a>を参照してください。</p>
<blockquote>
<h4 id="example">Example</h4>
<p>config:</p>
<pre><code class="lang-yaml"><span class="token key atrule" >timestamp_format</span><span class="token punctuation" >:</span> YYYY/MM/DD HH<span class="token punctuation" >:</span>mm
</code></pre>
<p>template:</p>
<pre><code class="lang-ejs"><span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>footer</span><span class="token punctuation" >></span></span>
  <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>%-</span> <span class="token attr-name" >timestamp</span> <span class="token attr-name" >%</span><span class="token punctuation" >></span></span>
<span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>footer</span><span class="token punctuation" >></span></span>
</code></pre>
<p>output:</p>
<pre><code class="lang-html"><span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>footer</span><span class="token punctuation" >></span></span>
  2016/04/07 17:11
<span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>footer</span><span class="token punctuation" >></span></span>
</code></pre>
</blockquote>
<h2 id="helper">helper</h2>
<p>複雑な処理が必要な場面で役に立つテンプレートヘルパーの集まりです。</p>
<h3 id="helper-createcollectiontree-collection_name-">helper.createCollectionTree(collection_name)</h3>
<p>aigisはコンフィグファイルの<code>output_collection</code>にある値でコンポーネントをグルーピングして出力します。デフォルトでは<code>category</code>と<code>tag</code>が設定してあります。コレクションは次のように<code>/</code>を使うことで階層表現をすることができます。</p>
<pre><code class="lang-yaml"><span class="token punctuation" >---</span>
<span class="token key atrule" >name</span><span class="token punctuation" >:</span> component
<span class="token key atrule" >category</span><span class="token punctuation" >:</span>
  <span class="token punctuation" >-</span> parent/child
<span class="token punctuation" >---</span>
</code></pre>
<p>このコンポーネントの場合、parentカテゴリの下のchildカテゴリに所属しています。スタイルガイドの出力はこの階層情報を持ちながら出力されます。こういった階層をサイドメニューなどとして表現するのはとても面倒ですので、用意されていたヘルパーを使って簡単に行えるようにしてあります。</p>
<p>(このドキュメントのサイドメニューもこのヘルパーを使って出力されたものです。)</p>
<blockquote>
<h4 id="example">Example</h4>
<pre><code class="lang-ejs"><span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>nav</span><span class="token punctuation" >></span></span>
  <span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;</span>%-</span> <span class="token attr-name" >helper.renderCollectionTree('category')</span> <span class="token attr-name" >%</span><span class="token punctuation" >></span></span>
<span class="token tag" ><span class="token tag" ><span class="token punctuation" >&lt;/</span>nav</span><span class="token punctuation" >></span></span>
</code></pre>
</blockquote>

      </div>
  
</div>

      </div>
    </main>
  </body>
</html>
